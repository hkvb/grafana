#!/usr/bin/env bash

# START CONFIGURATION
DOLLAR='$'
export VCW_STACK_GLOBAL_STACKS="hkvb/grafana"
export VCW_STACK_GLOBAL_STACKNAMES="grafana"
export VCW_STACK_GLOBAL_BOOTSTACKS=""
export VCW_STACK_GLOBAL_RUNSTACKS="grafana"
export VCW_STACK_GLOBAL_VOLUME_LIST="${DOLLAR}{VCW_STACK_GLOBAL_STACKPREFIX}_volume"
export VCW_STACK_GLOBAL_VOLUME_INITIALISED="${DOLLAR}{VCW_STACK_GLOBAL_STACKPREFIX}_volume:/var/lib/grafana"
# END CONFIGURATION

# START GLOBAL SETTINGS
export VCW_STACK_GLOBAL='\
$VCW_STACK_GLOBAL_SERVICE_NAME,\
$VCW_STACK_GLOBAL_IMAGE_NAME,\
$VCW_STACK_GRAFANA_ENVIRONMENT,\
$VCW_STACK_GRAFANA_COMMAND,\
$VCW_STACK_GRAFANA_PORTS,\
$VCW_STACK_GRAFANA_VOLUMES,\
$VCW_STACK_GRAFANA_NETWORKS,\
$VCW_STACK_GRAFANA_DEPLOY_MODE,\
$VCW_STACK_GLOBAL_VOLUMES,\
$VCW_STACK_GLOBAL_NETWORKS'
export VCW_STACK_GLOBAL_SERVICE_NAME="grafana"
export VCW_STACK_GLOBAL_IMAGE_NAME="grafana/grafana"
export VCW_STACK_GRAFANA_ENVIRONMENT="\
'GF_SERVER_SERVE_FROM_SUB_PATH=${DOLLAR}{VCW_STACK_GRAFANA_ENVIRONMENT_GF_SERVER_SERVE_FROM_SUB_PATH}', \
'GF_SECURITY_ALLOW_EMBEDDING=true', \
'GF_AUTH_ANONYMOUS_ENABLED=true', \
'GF_AUTH_ANONYMOUS_ORG_NAME=Main Org.', \
'GF_AUTH_ANONYMOUS_ORG_ROLE=${DOLLAR}{VCW_STACK_GRAFANA_ENVIRONMENT_GF_AUTH_ANONYMOUS_ORG_ROLE}', \
'GF_LOG_MODE=console', \
'GF_LOG_CONSOLE_FORMAT=text', \
'GF_LOG_LEVEL=${DOLLAR}{VCW_STACK_GRAFANA_ENVIRONMENT_GF_LOG_LEVEL}', \
'GF_SERVER_ROOT_URL=${DOLLAR}{VCW_STACK_GRAFANA_ENVIRONMENT_GF_SERVER_ROOT_URL}'"
export VCW_STACK_GRAFANA_COMMAND=
export VCW_STACK_GRAFANA_PORTS="${DOLLAR}{VCW_STACK_GRAFANA_PORTS_GRAFANA_PORT}:3000"
export VCW_STACK_GRAFANA_VOLUMES="'${DOLLAR}{VCW_STACK_GLOBAL_STACKPREFIX}_volume:/var/lib/grafana'"
export VCW_STACK_GRAFANA_NETWORKS="${DOLLAR}{VCW_STACK_GLOBAL_NETWORKLOCAL}_overlay"
export VCW_STACK_GRAFANA_DEPLOY_MODE="replicated"
export VCW_STACK_GLOBAL_VOLUMES="${DOLLAR}{VCW_STACK_GLOBAL_STACKPREFIX}_volume: { external: true }"
export VCW_STACK_GLOBAL_NETWORKS="${DOLLAR}{VCW_STACK_GLOBAL_NETWORKLOCAL}_overlay: { external: true }"
# END GLOBAL SETTINGS

# START SETTINGS grafana.base
export VCW_STACK_GRAFANA_ENVIRONMENT_GF_AUTH_ANONYMOUS_ORG_ROLE="${CONFIGURATION_MODULE_GRAFANA_AUTH_ANONYMOUS_ORG_ROLE}"
export VCW_STACK_GRAFANA_ENVIRONMENT_GF_LOG_LEVEL="${CONFIGURATION_MODULE_GRAFANA_LOG_LEVEL}"
export VCW_STACK_GRAFANA_ENVIRONMENT_GF_SERVER_SERVE_FROM_SUB_PATH="${CONFIGURATION_MODULE_GRAFANA_SERVE_FROM_SUB_PATH}"
export VCW_STACK_GRAFANA_ENVIRONMENT_GF_SERVER_ROOT_URL="${CONFIGURATION_MODULE_GRAFANA_SERVER_ROOT_URL}"
export VCW_STACK_GRAFANA_PORTS_GRAFANA_PORT="${CONFIGURATION_MODULE_GRAFANA_PORT}"
export VCW_STACK_GRAFANA_DEPLOY_RESOURCES_LIMITS_MEMORY="${CONFIGURATION_MODULE_GRAFANA_MEMORY_LIMIT}"
export VCW_STACK_GRAFANA_DEPLOY_RESOURCES_RESERVATIONS_MEMORY="${CONFIGURATION_MODULE_GRAFANA_MEMORY_RESERVED}"
# END SETTINGS grafana.base

# START TOPLEVEL SETTINGS
# END TOPLEVEL SETTINGS
